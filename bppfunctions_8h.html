<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>bppfunctions.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>bppfunctions.h File Reference</h1><code>#include &lt;<a class="el" href="bptypes_8h_source.html">ServiceAPI/bptypes.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="bpdefinition_8h_source.html">ServiceAPI/bpdefinition.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="bpcfunctions_8h_source.html">ServiceAPI/bpcfunctions.h</a>&gt;</code><br/>

<p><a href="bppfunctions_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_b_p_p_function_table__t.html">BPPFunctionTable_t</a></td></tr>
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#abb8dfb336a174991bcd49ecd934c5ca9">BPP_SERVICE_API_VERSION</a>&nbsp;&nbsp;&nbsp;5</td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef const <br class="typebreak"/>
<a class="el" href="struct_b_p_service_definition__t.html">BPServiceDefinition</a> *(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#aa5acf6b404a550c85fcc8ce9e89d844d">BPPInitializePtr</a> )(const <a class="el" href="struct_b_p_c_function_table.html">BPCFunctionTable</a> *coreFunctionTable, const <a class="el" href="bptypes_8h.html#a649cbcdceaebad31b9d16e0cdd9265b9">BPPath</a> serviceDir, const <a class="el" href="bptypes_8h.html#a649cbcdceaebad31b9d16e0cdd9265b9">BPPath</a> dependentDir, const <a class="el" href="struct_b_p_element__t.html">BPElement</a> *dependentParams)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#aff56def7a847a68449b498ea9063ef6f">BPPShutdownPtr</a> )(void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#aae3c508785ae706f368be33fc106578d">BPPAllocatePtr</a> )(void **instance, const <a class="el" href="bptypes_8h.html#a08e1a85f14963a2804438e25ba23a9c5">BPString</a> uri, const <a class="el" href="bptypes_8h.html#a649cbcdceaebad31b9d16e0cdd9265b9">BPPath</a> serviceDir, const <a class="el" href="bptypes_8h.html#a649cbcdceaebad31b9d16e0cdd9265b9">BPPath</a> dataDir, const <a class="el" href="bptypes_8h.html#a649cbcdceaebad31b9d16e0cdd9265b9">BPPath</a> tempDir, const <a class="el" href="bptypes_8h.html#a08e1a85f14963a2804438e25ba23a9c5">BPString</a> locale, const <a class="el" href="bptypes_8h.html#a08e1a85f14963a2804438e25ba23a9c5">BPString</a> userAgent, int clientPid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#ad44819fec8daa1ee336a74929b8c201a">BPPDestroyPtr</a> )(void *instance)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#aed2ac6dc58a6ed8d826257584d07b192">BPPInvokePtr</a> )(void *instance, const char *functionName, unsigned int tid, const <a class="el" href="struct_b_p_element__t.html">BPElement</a> *arguments)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#ac236d0c5866bf87758c00cd98f30ba85">BPPCancelPtr</a> )(void *instance, unsigned int tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#a857461d9b323b3e026919e607b8717a7">BPPInstallPtr</a> )(const <a class="el" href="bptypes_8h.html#a649cbcdceaebad31b9d16e0cdd9265b9">BPPath</a> serviceDir, const <a class="el" href="bptypes_8h.html#a649cbcdceaebad31b9d16e0cdd9265b9">BPPath</a> dataDir)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#a5c197d764de1d3e31ea853af86be3bdf">BPPUninstallPtr</a> )(const <a class="el" href="bptypes_8h.html#a649cbcdceaebad31b9d16e0cdd9265b9">BPPath</a> serviceDir, const <a class="el" href="bptypes_8h.html#a649cbcdceaebad31b9d16e0cdd9265b9">BPPath</a> dataDir)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_b_p_p_function_table__t.html">BPPFunctionTable_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#a1d3dd8d96d16854d423142f9bebffe98">BPPFunctionTable</a></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="struct_b_p_p_function_table__t.html">BPPFunctionTable</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bppfunctions_8h.html#a79b804600beac147fb6389b800aec293">BPPGetEntryPoints</a> (void)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abb8dfb336a174991bcd49ecd934c5ca9"></a><!-- doxytag: member="bppfunctions.h::BPP_SERVICE_API_VERSION" ref="abb8dfb336a174991bcd49ecd934c5ca9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BPP_SERVICE_API_VERSION&nbsp;&nbsp;&nbsp;5</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="aae3c508785ae706f368be33fc106578d"></a><!-- doxytag: member="bppfunctions.h::BPPAllocatePtr" ref="aae3c508785ae706f368be33fc106578d" args=")(void **instance, const BPString uri, const BPPath serviceDir, const BPPath dataDir, const BPPath tempDir, const BPString locale, const BPString userAgent, int clientPid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="bppfunctions_8h.html#aae3c508785ae706f368be33fc106578d">BPPAllocatePtr</a>)(void **instance, const <a class="el" href="bptypes_8h.html#a08e1a85f14963a2804438e25ba23a9c5">BPString</a> uri, const <a class="el" href="bptypes_8h.html#a649cbcdceaebad31b9d16e0cdd9265b9">BPPath</a> serviceDir, const <a class="el" href="bptypes_8h.html#a649cbcdceaebad31b9d16e0cdd9265b9">BPPath</a> dataDir, const <a class="el" href="bptypes_8h.html#a649cbcdceaebad31b9d16e0cdd9265b9">BPPath</a> tempDir, const <a class="el" href="bptypes_8h.html#a08e1a85f14963a2804438e25ba23a9c5">BPString</a> locale, const <a class="el" href="bptypes_8h.html#a08e1a85f14963a2804438e25ba23a9c5">BPString</a> userAgent, int clientPid)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Allocate a new service instance.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>instance</em>&nbsp;</td><td>A void pointer that will be passed back to subsequent calls to invoke and destroy. This is an output parameter that services may use to store instance-specific context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>uri</em>&nbsp;</td><td>a UTF8 encoded string containing a URI of the current client. This is usually the full URL to the webpage that is interacting with browserplus. In the case of a native local application interacting with browserplus it should be a URI with a method of 'bpclient' (i.e. bpclient://CLIENTIDENTIFIER'). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>serviceDir</em>&nbsp;</td><td>is an absolute path to the directory containing the files distributed with the service. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dataDir</em>&nbsp;</td><td>is an absolute path to where the service should store any data that needs to persist. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tempDir</em>&nbsp;</td><td>is an instance-specific directory that may be used for temporary data. Service is responsible for creating the directory. Service should remove the directory when the instance is deallocated. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>locale</em>&nbsp;</td><td>The locale of the end user to which strings, if any, should be localized. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>userAgent</em>&nbsp;</td><td>The client user-agent as a UTF8 encoded string. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>clientPid</em>&nbsp;</td><td>The process ID of the client program/browser.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>zero on success, non-zero on failure </dd></dl>

</div>
</div>
<a class="anchor" id="ac236d0c5866bf87758c00cd98f30ba85"></a><!-- doxytag: member="bppfunctions.h::BPPCancelPtr" ref="ac236d0c5866bf87758c00cd98f30ba85" args=")(void *instance, unsigned int tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="bppfunctions_8h.html#ac236d0c5866bf87758c00cd98f30ba85">BPPCancelPtr</a>)(void *instance, unsigned int tid)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Cancel a transaction previously started by calling <a class="el" href="bppfunctions_8h.html#aed2ac6dc58a6ed8d826257584d07b192">BPPInvokePtr()</a></p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>instance</em>&nbsp;</td><td>The instance pointer returned from a BPPAllocate call. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tid</em>&nbsp;</td><td>The transaction id of this function invocation. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad44819fec8daa1ee336a74929b8c201a"></a><!-- doxytag: member="bppfunctions.h::BPPDestroyPtr" ref="ad44819fec8daa1ee336a74929b8c201a" args=")(void *instance)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="bppfunctions_8h.html#ad44819fec8daa1ee336a74929b8c201a">BPPDestroyPtr</a>)(void *instance)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Destroy a service instance allocated with BPPAllocate.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>instance</em>&nbsp;</td><td>An instance pointer returned from a BPPAllocate call. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1d3dd8d96d16854d423142f9bebffe98"></a><!-- doxytag: member="bppfunctions.h::BPPFunctionTable" ref="a1d3dd8d96d16854d423142f9bebffe98" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_b_p_p_function_table__t.html">BPPFunctionTable_t</a>  <a class="el" href="struct_b_p_p_function_table__t.html">BPPFunctionTable</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa5acf6b404a550c85fcc8ce9e89d844d"></a><!-- doxytag: member="bppfunctions.h::BPPInitializePtr" ref="aa5acf6b404a550c85fcc8ce9e89d844d" args=")(const BPCFunctionTable *coreFunctionTable, const BPPath serviceDir, const BPPath dependentDir, const BPElement *dependentParams)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef const <a class="el" href="struct_b_p_service_definition__t.html">BPServiceDefinition</a>*(* <a class="el" href="bppfunctions_8h.html#aa5acf6b404a550c85fcc8ce9e89d844d">BPPInitializePtr</a>)(const <a class="el" href="struct_b_p_c_function_table.html">BPCFunctionTable</a> *coreFunctionTable, const <a class="el" href="bptypes_8h.html#a649cbcdceaebad31b9d16e0cdd9265b9">BPPath</a> serviceDir, const <a class="el" href="bptypes_8h.html#a649cbcdceaebad31b9d16e0cdd9265b9">BPPath</a> dependentDir, const <a class="el" href="struct_b_p_element__t.html">BPElement</a> *dependentParams)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>***** BEGIN LICENSE BLOCK ***** The contents of this file are subject to the Mozilla Public License Version 1.1 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at <a href="http://www.mozilla.org/MPL/">http://www.mozilla.org/MPL/</a></p>
<p>Software distributed under the License is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language governing rights and limitations under the License.</p>
<p>The Original Code is BrowserPlus (tm).</p>
<p>The Initial Developer of the Original Code is Yahoo!. Portions created by Yahoo! are Copyright (c) 2010 Yahoo! Inc. All rights reserved.</p>
<p>Contributor(s): ***** END LICENSE BLOCK ***** Written by Lloyd Hilaiel, on or around Fri May 18 17:06:54 MDT 2007</p>
<p>Overview:</p>
<p>Functions that must be implemented by the service are prefaced with BPP and are located in this file. Initialize the service, called once at service load time.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>coreFunctionTable</em>&nbsp;</td><td>pointer to a structure of pointers to BPC functions that the service may call through into BPCore. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>serviceDir</em>&nbsp;</td><td>The directory in which the service being initialized is installed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dependentDir</em>&nbsp;</td><td>In the case of a provider service, the path to the dependent service being loaded. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dependentParams</em>&nbsp;</td><td>In the case of a provider service, arguments from the manifest.json of the dependent service.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A service definition which describes the interface of the service. This memory should not be freed until the service is shutdown. </dd></dl>

</div>
</div>
<a class="anchor" id="a857461d9b323b3e026919e607b8717a7"></a><!-- doxytag: member="bppfunctions.h::BPPInstallPtr" ref="a857461d9b323b3e026919e607b8717a7" args=")(const BPPath serviceDir, const BPPath dataDir)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="bppfunctions_8h.html#a857461d9b323b3e026919e607b8717a7">BPPInstallPtr</a>)(const <a class="el" href="bptypes_8h.html#a649cbcdceaebad31b9d16e0cdd9265b9">BPPath</a> serviceDir, const <a class="el" href="bptypes_8h.html#a649cbcdceaebad31b9d16e0cdd9265b9">BPPath</a> dataDir)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A callback invoked exactly once immediately after a service is installed on disk. This is an opportunity for a service to perform any one-time setup.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>serviceDir</em>&nbsp;</td><td>is an absolute path to the directory containing the files distributed with the service. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dataDir</em>&nbsp;</td><td>is an absolute path to where the service should store any data that needs to persist. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aed2ac6dc58a6ed8d826257584d07b192"></a><!-- doxytag: member="bppfunctions.h::BPPInvokePtr" ref="aed2ac6dc58a6ed8d826257584d07b192" args=")(void *instance, const char *functionName, unsigned int tid, const BPElement *arguments)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="bppfunctions_8h.html#aed2ac6dc58a6ed8d826257584d07b192">BPPInvokePtr</a>)(void *instance, const char *functionName, unsigned int tid, const <a class="el" href="struct_b_p_element__t.html">BPElement</a> *arguments)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Invoke a service method.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>instance</em>&nbsp;</td><td>The instance pointer returned from a BPPAllocate call. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>functionName</em>&nbsp;</td><td>The name of the function being invoked </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tid</em>&nbsp;</td><td>The transaction id of this function invocation. Should be passed by the service to BPCPostResultsFuncPtr or BPCPostErrorFuncPtr </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>arguments</em>&nbsp;</td><td>The validated arguments to the function. The service is guaranteed that all defined arguments to the function from the function description structure have been checked, and that no unsupported arguments are present, nor are required arguments missing. This is always a BPTMap. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aff56def7a847a68449b498ea9063ef6f"></a><!-- doxytag: member="bppfunctions.h::BPPShutdownPtr" ref="aff56def7a847a68449b498ea9063ef6f" args=")(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="bppfunctions_8h.html#aff56def7a847a68449b498ea9063ef6f">BPPShutdownPtr</a>)(void)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Shutdown the service. Called once at service unload time. All allocated instances will have been deleted by the time this function is called. </p>

</div>
</div>
<a class="anchor" id="a5c197d764de1d3e31ea853af86be3bdf"></a><!-- doxytag: member="bppfunctions.h::BPPUninstallPtr" ref="a5c197d764de1d3e31ea853af86be3bdf" args=")(const BPPath serviceDir, const BPPath dataDir)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* <a class="el" href="bppfunctions_8h.html#a5c197d764de1d3e31ea853af86be3bdf">BPPUninstallPtr</a>)(const <a class="el" href="bptypes_8h.html#a649cbcdceaebad31b9d16e0cdd9265b9">BPPath</a> serviceDir, const <a class="el" href="bptypes_8h.html#a649cbcdceaebad31b9d16e0cdd9265b9">BPPath</a> dataDir)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A callback invoked exactly once immediately before a service is purged from disk. This is an opportunity for a service to perform any one-time cleanup.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>serviceDir</em>&nbsp;</td><td>is an absolute path to the directory containing the files distributed with the service. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dataDir</em>&nbsp;</td><td>is an absolute path to where the service should store any data that needs to persist. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a79b804600beac147fb6389b800aec293"></a><!-- doxytag: member="bppfunctions.h::BPPGetEntryPoints" ref="a79b804600beac147fb6389b800aec293" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="struct_b_p_p_function_table__t.html">BPPFunctionTable</a>* BPPGetEntryPoints </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The single entry point into the plugin which attains a BPPFunctionTable containing the version. Having a single symbol which is sought in the plugin interface allows the service author to strip all other symbols. </p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
